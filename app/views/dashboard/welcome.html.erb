<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="mb-8">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <div>
        <h1 class="text-fluid-3xl font-bold text-text-primary mb-2">
          Welcome back, <%= current_user.full_name %>!
        </h1>
        <p class="text-fluid-lg text-text-secondary">
          Ready to make today count? You've got this!
        </p>
      </div>
      <div class="flex items-center space-x-3">
        <%= link_to new_habits_list_item_path(current_user.default_list), class: 'bg-green-500 text-white px-6 py-3 rounded-xl font-medium hover:bg-green-600 focus:ring-4 focus:ring-green-200 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] flex items-center space-x-2', data: { turbo_stream: true } do %>
          <i class="fa fa-plus mr-2"></i>
          Add Habit
        <% end %>
      </div>
    </div>
  </div>
  <!-- Today's Habits Section -->
  <div class="mb-8">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-fluid-2xl font-bold text-gray-700">Today's Habits</h2>
      <div class="flex items-center space-x-4">
        <span class="text-sm text-gray-400 dark:text-gray-300"><%= Date.today.strftime("%B %d, %Y") %></span>
      </div>
    </div>

    <!-- Habits Grid -->
    <div x-data="{ tab: 'inprogress' }">
      <div class="flex space-x-4 mb-6">
        <button
          :class="tab === 'inprogress' ? 'bg-primary-100 text-primary-700' : ''"
          class="tab-btn font-semibold px-4 py-2 rounded-lg"
          @click="tab = 'inprogress'"
        >In Progress</button>
        <button
          :class="tab === 'completed' ? 'bg-primary-100 text-primary-700' : ''"
          class="tab-btn font-semibold px-4 py-2 rounded-lg"
          @click="tab = 'completed'"
        >Completed</button>
      </div>
      <div x-show="tab === 'inprogress'">
        <%= turbo_frame_tag "habit_items_inprogress", class: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" do %>
          <% if @in_progress_habits.any? %>
            <% @in_progress_habits.each do |item| %>
              <%= render partial: "habits/items/habit_card", locals: { item: item } %>
            <% end %>
          <% else %>
            <%= render partial: "habits/items/empty_inprogress" %>
          <% end %>
        <% end %>
      </div>
      <div x-show="tab === 'completed'">
        <%= turbo_frame_tag "habit_items_completed", class: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" do %>
          <% if @completed_habits.any? %>
            <% @completed_habits.each do |item| %>
              <%= render partial: "habits/items/habit_card", locals: { item: item } %>
            <% end %>
          <% else %>
            <%= render partial: "habits/items/empty_completed" %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</main>